[
  {
    "type": "function",
    "function": {
      "name": "analyze_project",
      "description": "Perform project-wide analysis (e.g., linting, static analysis) appropriate for the project type. Returns warnings, suggestions, and errors.",
      "parameters": {
        "type": "object",
        "properties": {},
        "required": []
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "get_file_info",
      "description": "Get metadata about a file or directory (size, modified time, type, line count if text file)",
      "parameters": {
        "type": "object",
        "properties": {
          "path": { "type": "string" }
        },
        "required": ["path"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "file_exists",
      "description": "Check whether a file or directory exists",
      "parameters": {
        "type": "object",
        "properties": {
          "path": { "type": "string" }
        },
        "required": ["path"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "read_file",
      "description": "Read the entire content of a file",
      "parameters": {
        "type": "object",
        "properties": {
          "path": { "type": "string" }
        },
        "required": ["path"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "read_multiple_files",
      "description": "Read contents of multiple files at once and return them concatenated with separators. Useful for building multi-file context efficiently.",
      "parameters": {
        "type": "object",
        "properties": {
          "paths": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Array of relative file paths to read."
          }
        },
        "required": ["paths"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "write_file",
      "description": "Write or overwrite a file, creating parent directories if necessary",
      "parameters": {
        "type": "object",
        "properties": {
          "path": { "type": "string" },
          "content": { "type": "string" }
        },
        "required": ["path", "content"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "append_to_file",
      "description": "Append text to the end of a file (creates file if missing)",
      "parameters": {
        "type": "object",
        "properties": {
          "path": { "type": "string" },
          "content": { "type": "string" }
        },
        "required": ["path", "content"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "replace_in_file",
      "description": "Replace all exact matches of a string in a file",
      "parameters": {
        "type": "object",
        "properties": {
          "path": { "type": "string" },
          "search": { "type": "string" },
          "replace": { "type": "string" }
        },
        "required": ["path", "search", "replace"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "create_directory",
      "description": "Create a directory (idempotent, creates parents)",
      "parameters": {
        "type": "object",
        "properties": {
          "path": { "type": "string" }
        },
        "required": ["path"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "list_directory",
      "description": "List files and directories in a directory (non-recursive)",
      "parameters": {
        "type": "object",
        "properties": {
          "path": { "type": "string" }
        }
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "get_directory_tree",
      "description": "Get a recursive directory tree",
      "parameters": {
        "type": "object",
        "properties": {
          "path": { "type": "string" }
        }
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "list_files_recursive",
      "description": "Return a flat list of all regular files in a directory tree",
      "parameters": {
        "type": "object",
        "properties": {
          "path": { "type": "string" },
          "extension": { "type": "string" }
        }
      }
    }
  },

  {
    "type": "function",
    "function": {
      "name": "search_text",
      "description": "Search for lines containing a pattern (grep-like)",
      "parameters": {
        "type": "object",
        "properties": {
          "pattern": { "type": "string" },
          "path": { "type": "string" },
          "case_sensitive": { "type": "boolean" }
        },
        "required": ["pattern"]
      }
    }
  },

  {
    "type": "function",
    "function": {
      "name": "find_file",
      "description": "Find files by name pattern recursively. Useful when you know a filename but not its exact path.",
      "parameters": {
        "type": "object",
        "properties": {
          "pattern": {
            "type": "string",
            "description": "The filename pattern to search for (substring match)."
          },
          "path": {
            "type": "string",
            "description": "Optional base directory to start search from (default: \".\")."
          }
        },
        "required": [
          "pattern"
        ]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "execute_shell_command",
      "description": "Execute an allowed shell command (cargo only)",
      "parameters": {
        "type": "object",
        "properties": {
          "command": { "type": "string" }
        },
        "required": ["command"]
      }
    }
  },

  {
    "type": "function",
    "function": {
      "name": "git_status",
      "description": "Get git status (short)",
      "parameters": {
        "type": "object",
        "properties": {}
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "git_diff",
      "description": "Show git diff",
      "parameters": {
        "type": "object",
        "properties": {
          "path": { "type": "string" }
        }
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "git_add",
      "description": "Stage files for commit",
      "parameters": {
        "type": "object",
        "properties": {
          "path": { "type": "string" }
        },
        "required": ["path"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "git_commit",
      "description": "Create a git commit",
      "parameters": {
        "type": "object",
        "properties": {
          "message": { "type": "string" }
        },
        "required": ["message"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "lint_file",
      "description": "Run a linter on a file to check for syntax errors and code quality issues. Automatically detects file type and runs appropriate linter (cargo check for Rust, eslint for JS/TS, etc.)",
      "parameters": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "Path to the file to lint"
          }
        },
        "required": ["path"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "search_code_semantic",
      "description": "Perform semantic search on the indexed codebase using natural language queries. Returns relevant code snippets based on meaning, not just text matching.",
      "parameters": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "description": "Natural language query describing what you're looking for in the codebase"
          },
          "limit": {
            "type": "integer",
            "description": "Maximum number of results to return (default: 5)"
          }
        },
        "required": ["query"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "review_code",
      "description": "Perform a comprehensive code review on a file, analyzing code quality, potential issues, and best practices. Checks for long lines, long functions, TODOs, commented code, magic numbers, and more.",
      "parameters": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "Path to the file to review"
          }
        },
        "required": ["path"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "suggest_refactorings",
      "description": "Analyze a file and suggest potential refactorings based on common patterns like code duplication, long parameter lists, deep nesting, etc.",
      "parameters": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "Path to the file to analyze for refactoring opportunities"
          }
        },
        "required": ["path"]
      }
    }
  }
]
